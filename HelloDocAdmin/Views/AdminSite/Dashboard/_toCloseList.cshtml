@using HelloDocAdmin.Entity.Models;
@using HelloDocAdmin.Entity.ViewModels;
@model List<DashboardRequestModel>





<div class="card bg-transparent border-0 ">
    <div class="card-header p-2  d-flex justify-content-between  border-0  bg-transparent  mt-2">
        <div class="text-start   d-flex ">
            <span class="fw-bold hero-heading"> Patients</span><span class="mx-2 fw-bold text-primary mt-2 hero-heading-active">(@TempData["CurrentStatus"])</span>
        </div>
        <div class="text-end ">
            <partial name="../Action/Partialdash/DashboardButtons.cshtml" />

        </div>
    </div>
    <div class="card-body rounded shadow-lg m-2 ">
        <partial name="../Action/Partialdash/_SearchFilter.cshtml" />
        <div class="table-responsive dashboard-tbl mt-3 ">
            <table id="myTable" class="table table-responsive">
                <thead class=" text-start tablehead">
                    <tr>
                        <th scope="col">Name</th>
                        <th scope="col">Date of Birth</th>
                        <th scope="col">Region</th>

                        <th scope="col">Rqequestor</th>
                        <th scope="col">Date of Service</th>
                        <th scope="col">Phone</th>
                        <th scope="col">Address</th>
                        <th scope="col">Notes</th>
                        <th scope="col">Chat With</th>
                        <th scope="col">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model)
                    {

                        if (item.RequestTypeID == 2)
                        {
                            TempData["hb"] = "bg-family-row";
                        }
                        else if (item.RequestTypeID == 4)
                        {
                            TempData["hb"] = "bg-business-row";
                        }
                        else if (item.RequestTypeID == 3)
                        {
                            TempData["hb"] = "bg-concierge-row";

                        }
                        else
                        {
                            TempData["hb"] = "bg-patient-row";
                        }







                        <tr class="@TempData["hb"]">
                            <td scope="col">
                                <div class="text-end d-flex justify-content-between">
                                    <div class="text-start d-grid">
                                        @item.PatientName
                                    </div> <div class="text-end   border border-1 p-1 text-end rounded-1 py-0 btn text-white">
                                        <a href="mailto:@item.Email" class="text-white">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-envelope" viewBox="0 0 16 16">
                                                <path d="M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2zm2-1a1 1 0 0 0-1 1v.217l7 4.2 7-4.2V4a1 1 0 0 0-1-1zm13 2.383-4.708 2.825L15 11.105zm-.034 6.876-5.64-3.471L8 9.583l-1.326-.795-5.64 3.47A1 1 0 0 0 2 13h12a1 1 0 0 0 .966-.741M1 11.105l4.708-2.897L1 5.383z" />
                                            </svg>
                                        </a>

                                    </div>
                                </div>
                            </td>

                            <td scope="col">@item.Dob</td>
                            <td scope="col">@item.Region</td>
                            <td scope="col">@item.Requestor</td>
                            <td scope="col">@item.RequestedDate</td>
                            <td scope="col">
                                <a href=" tel:+@item.PhoneNumber" class="text-white">
                                    <div class="border border-1 p-1 rounded-2 text-center  w-75 py-1"><i class="bi bi-telephone"></i> @item.PhoneNumber </div>

                                </a>
                                <span>
                                    (Patient)
                                </span>

                                @{
                                    if (item.RequestTypeID == 2)
                                    {
                                        <a href=" tel:+@item.PhoneNumber" class="text-white">
                                            <div class="border border-1 p-1 rounded-2 text-center  w-75 py-1"><i class="bi bi-telephone"></i> @item.RequestorPhoneNumber </div>
                                        </a>  <span>
                                            (Family/Friend)
                                        </span>
                                    }
                                    else if (item.RequestTypeID == 4)
                                    {
                                        <a href=" tel:+@item.PhoneNumber" class="text-white">
                                            <div class="border border-1 p-1 rounded-2 text-center w-75 py-1"><i class="bi bi-telephone"></i> @item.RequestorPhoneNumber </div>
                                        </a> <span>
                                            (Concierge)
                                        </span>
                                    }
                                    else if (item.RequestTypeID == 3)
                                    {
                                        <a href=" tel:+@item.PhoneNumber" class="text-white">
                                            <div class="border border-1 p-1 rounded-2 text-center  w-75 py-1"><i class="bi bi-telephone"></i> @item.RequestorPhoneNumber </div>
                                        </a> <span>
                                            (Business Partner)
                                        </span>
                                    }
                                }
                            </td>
                            <td scope="col">@item.Address</td>
                            <td scope="col">@item.Notes</td>
                         
                            <td scope="col" style="flex:auto">
                                <div class="border border-1 p-1 rounded-2 text-center w-75 py-1">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person-workspace" viewBox="0 0 16 16">
                                        <path d="M4 16s-1 0-1-1 1-4 5-4 5 3 5 4-1 1-1 1zm4-5.95a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5" />
                                        <path d="M2 1a2 2 0 0 0-2 2v9.5A1.5 1.5 0 0 0 1.5 14h.653a5.4 5.4 0 0 1 1.066-2H1V3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v9h-2.219c.554.654.89 1.373 1.066 2h.653a1.5 1.5 0 0 0 1.5-1.5V3a2 2 0 0 0-2-2z" />
                                    </svg> Provider
                                </div>
                                <div class="border border-1 p-1 rounded-2 text-center w-75 py-1">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person" viewBox="0 0 16 16">
                                        <path d="M4 16s-1 0-1-1 1-4 5-4 5 3 5 4-1 1-1 1zm4-5.95a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5" />
                                        <path d="M2 1a2 2 0 0 0-2 2v9.5A1.5 1.5 0 0 0 1.5 14h.653a5.4 5.4 0 0 1 1.066-2H1V3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v9h-2.219c.554.654.89 1.373 1.066 2h.653a1.5 1.5 0 0 0 1.5-1.5V3a2 2 0 0 0-2-2z" />
                                    </svg> Patient
                                </div>
                            </td>
                            <td scope="col">
                                <div class="border act-btn  border-1 p-1 rounded-2 text-center  py-1" data-bs-toggle="dropdown" aria-expanded="false">Actions </div>

                                <ul class="dropdown-menu">
                                    <li><a class="dropdown-item " asp-action="ViewCase" asp-controller="Action" asp-route-id="@item.RequestID"><i class="bi bi-file-earmark-fill  mx-1"></i>View Case</a></li>

                                    <li><a class="dropdown-item " href="#"><i class="bi bi-file-earmark-zip mx-1"></i>View Uploads</a></li>
                                    <li><a class="dropdown-item " href="#"><i class="bi bi-card-checklist mx-1"></i>View Notes</a></li>
                                    <li><a class="dropdown-item " href="#"><i class="bi bi-journal-text  mx-1"></i>Orders</a></li>
                                    <li><a class="dropdown-item " href="#"><i class="bi bi-x-circle  mx-1"></i>Close Case</a></li>
                                    <li><a class="dropdown-item " href="#"><i class="bi bi-journal-text  mx-1"></i>Doctor Notes</a></li>
                                    <li><a class="dropdown-item " href="#"><i class="bi bi-x-circle  mx-1"></i>Clear Case</a></li>
                                    <li><a class="dropdown-item " href="#"><i class="bi bi-card-checklist  mx-1"></i>Encounter</a></li>
                                </ul>
                            </td>
                        </tr>
                    }


                </tbody>
            </table>
        </div>


    </div>
</div>
<script>
    $(document).ready(function () {
        $("#myTable").DataTable();
    });
</script>
<script>
    function myFunction() {
        // Declare variables
        var input, filter, table, tr, td, i, txtValue;
        input = document.getElementById("myInput");
        filter = input.value.toUpperCase();
        table = document.getElementById("myTable");
        tr = table.getElementsByTagName("tr");

        // Loop through all table rows, and hide those who don't match the search query
        for (i = 0; i < tr.length; i++) {
            td = tr[i].getElementsByTagName("td")[0];
            if (td) {
                txtValue = td.textContent || td.innerText;
                if (txtValue.toUpperCase().indexOf(filter) > -1) {
                    tr[i].style.display = "";
                } else {
                    tr[i].style.display = "none";
                }
            }
        }
    }
</script>